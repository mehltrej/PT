import os
import subprocess
import socket
#import nmap
import re
import sys
print sys.argv

strDomain = raw_input ('Input the domain: ')
intIPAddr = raw_input ('Input the IP Address: ')
print 'Input Taken'
dctCmdOut = {}

#f strPingResp == 0:
#    for cmd in tplNmapScriptCmd:
#        strCommand = tplNmapScriptCmd[count]
#        print '\nCommand Running: ', cmd, '\n' #strCommand
#        dctCmdOut[count] = os.system(strCommand + " " + intIPAddr)
#        print dctCmdOut[count]
#        count = count + 1


if not os.path.exists("/home/OSINTout"):
    os.makedirs("/home/OSINTout")

print'\n outside the directory creation check'
count = 1
while (count != 0):
    print '\n Command Running: whois \n'
    with open('/home/OSINTout/out.txt', "w") as myfile:
        myfile.write("\n\t\t ********* WHOIS *********** \n")

    os.system("proxychains whois " + strDomain + " >> /home/OSINTout/out.txt")

    print '\n Command Running: dig DNS IP Lookup \n'
    with open('/home/OSINTout/out.txt', "a") as myfile:
        myfile.write("\n\t\t ********* DIG *********** \n")

    os.system("proxychains dig a " + strDomain + " >> /home/OSINTout/out.txt")
    os.system("proxychains dig mx " + strDomain + " >> /home/OSINTout/out.txt")
    os.system("proxychains dig axfr " + strDomain + " >> /home/OSINTout/out.txt")

    print '\n Command Running:Dmitry OSINT tool \n'
    with open('/home/OSINTout/out.txt', "a") as myfile:
        myfile.write("\n\t\t ********* Dmitry *********** \n")

    os.system("proxychains dmitry -winsepo " + strDomain + " >> /home/OSINTout/out.txt")

    print '\n Fingerprinting with NC & Telnet\n'
    with open('/home/OSINTout/out.txt', "a") as myfile:
        myfile.write("\n\t\t ********* NC & Telnet Fingerprinting *********** \n")

    os.system("proxychains nc -v " + intIPAddr + " >> /home/OSINTout/out.txt")
    os.system("proxychains telnet " + intIPAddr + " >> /home/OSINTout/out.txt")

    print '\n Performing Active Info Gathering with DNSRecon \n'
    with open('/home/OSINTout/out.txt', "a") as myfile:
        myfile.write("\n\t\t ********* Active Info Gathering with DNSRecon *********** \n")
    os.system("proxychains dnsrecon -d " + intIPAddr + " -D /usr/share/wordlists/dnsmap.txt -t std --xml output.xml")
    count = 0
